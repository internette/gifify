var _=self.Gifify=function(t){this.query=t.query};_.prototype={get init_elms(){return this.getAllElements(this.query)},getAllElements:function(t){return document.querySelectorAll(t)},get cleanedQuery(){return this.query.match(/\s/gi)?this.query.replace(/\s/gi,"+"):this.query},get getGiphyString(){return"http://api.giphy.com/v1/gifs/search?q="+this.cleanedQuery+"&api_key=dc6zaTOxFJmzC"},createTooltipImg:function(t,e){var i=document.createElement("img");return i.src=e,i.style.width=t/2+"px",i},checkForBodyMargin:function(){},createToolTip:function(t,e,i,n){var o=document.createElement("div"),r=this.createTooltipImg(t,n);if(o.id="tooltip",i.getBoundingClientRect().top<e+5?(o.className+="bottom",o.style.top=i.getBoundingClientRect().height+i.getBoundingClientRect().top+7+"px"):(o.className+="top",o.style.top=i.getBoundingClientRect().top-(e/2+i.getBoundingClientRect().top+7)+"px"),i.getBoundingClientRect().left<t/2)o.className+=" left",o.style.left="15px";else if(i.getBoundingClientRect().left>window.innerWidth-t)o.className+=" right",o.style.left="auto",o.style.right="15px";else{var a=i.getBoundingClientRect().left+i.getBoundingClientRect().width/2,s=(t+20)/2;o.style.left=a-s+"px"}return o.appendChild(r),o},addTooltipToBody:function(t,e,i,n){var o=this.createToolTip(e,i,n,t);document.body.appendChild(o)},randInt:function(t,e){return Math.floor(Math.random()*(e-t+1))+t},getRandomImage:function(t){var e=t[this.randInt(0,t.length)];return e.hasOwnProperty("images")?e.images.fixed_height:e.fixed_height},imgProperties:function(t){return{src:t.url,width:parseInt(t.width),height:parseInt(t.height)}},parsedResponseData:function(t){return JSON.parse(t).data},initializeTooltip:function(t,e){var i=this.parsedResponseData(t),n=this.imgProperties(this.getRandomImage(i));this.addTooltipToBody(n.src,n.width,n.height,e),this.fadeIn(document.getElementById("tooltip"))},fadeIn:function(t){var e=this;Number(t.style.opacity)<1&&(t.style.opacity=Number(t.style.opacity)+.25,t.className.match(/top/gi)?t.style.top=parseInt(t.style.top.slice(0,-2))-3+"px":t.style.top=parseInt(t.style.top.slice(0,-2))+3+"px",setTimeout(function(){return e.fadeIn(t)},20))},apiCall:function(t){var e=this,i=new XMLHttpRequest;i.open("GET","http://api.giphy.com/v1/gifs/search?q="+this.cleanedQuery+"&api_key=dc6zaTOxFJmzC"),i.send(null),i.onreadystatechange=function(){4===i.readyState&&(200===i.status?e.initializeTooltip(i.responseText,t):console.error("There was a problem"))}},fadeOut:function(t){var e=this;Number(t.style.opacity)>0?(t.style.opacity=Number(t.style.opacity)-.25,t.style.top=Number(t.style.top.slice(0,-2))+2+"px",setTimeout(function(){return e.fadeOut(t)},30)):t.parentNode.removeChild(t)},gifify:function(){for(var t=0;t<this.getAllElements(this.query).length;t++)$this=this,this.init_elms[t].addEventListener("mouseenter",function(t){setTimeout(function(){$this.apiCall(t.target)},100)}),$this.init_elms[t].addEventListener("mouseout",function(){for(var t=document.querySelectorAll("#tooltip"),e=0;e<t.length;e++){var i=t[e];$this.fadeOut(i)}})}};var Wrapper=function(t){return Wrapper.prototype=_.prototype,Wrapper.fn=_.prototype,new Gifify({query:t})};$=Wrapper;